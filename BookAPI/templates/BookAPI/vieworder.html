{% extends 'base.html' %}

{% block content %}
<h2>Orders for Delivery</h2>

{% if orders %}
<ul>
    {% for order in orders %}
    <li>
        <strong>Order ID:</strong> {{ order.id }}<br>
        <strong>Items:</strong>
        <ul>
            {% for item in order.items.all %}
            <li>{{ item.item.name }} (x{{ item.quantity }})</li>
            {% endfor %}
        </ul>
        {% if not order.delivered %}
        <form method="post" action="{% url 'view_order' %}">
            {% csrf_token %}
            <input type="hidden" name="order_id" value="{{ order.id }}">
            <button type="submit">Mark as Delivered</button>
        </form>
        <span>Status: In Progress</span>
        {% else %}
        <span>Status: Delivered</span>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No orders to deliver.</p>
{% endif %}

{% endblock %}
